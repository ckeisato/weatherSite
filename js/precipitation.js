define(["debounce"],function(t){return{width:0,height:0,initPercipitation:function(i,e){this.parent=e,this.svgContainer=this.parent.weatherBox;var r=this;this.setPrecip(i)&&(this.attachPrecip(),this.precipTimer());var n=t.debounce(function(){r.updateDimensions()},200);window.addEventListener("resize",n)},setPrecip:function(t){switch(!0){case[200,210,230,231,300,310,311,500,520].indexOf(t)>=0:return this.numPrecip=200,this.rx=1,this.ry=2,this.dy=-3,!0;case[201,211,221,302,313,321,501,521].indexOf(t)>=0:return this.numPrecip=400,this.rx=1,this.ry=2.5,this.dy=-5,!0;case[202,212,231,232,312,314,502,503,504,511,522,531].indexOf(t)>=0:return this.numPrecip=500,this.rx=1.5,this.ry=3,this.dy=-7,!0;case t<600:return this.numPrecip=200,this.rx=1,this.ry=2,this.dy=-2,!0;default:return!1}},attachPrecip:function(){var t=this;this.circle=this.svgContainer.selectAll("ellipse").data(d3.range(t.numPrecip).map(function(i,e){return{x:20*e,y:0,dx:1*(Math.random()+1),dy:t.dy*(Math.random()+1)}})).enter().append("svg:ellipse").attr("ry",t.ry).attr("rx",t.rx).attr("fill","white").attr("opacity",".8")},updateDimensions:function(){this.width=window.innerWidth,this.height=window.innerHeight},precipTimer:function(){this.updateDimensions();var t=this;this.timer&&this.timer.stop(),this.timer=d3.timer(function(){t.circle.attr("cx",function(i){return i.x+=i.dx,i.x>t.width?i.x-=t.width:i.x<0&&(i.x+=t.width),i.x}).attr("cy",function(i){return i.y-=i.dy,i.y>t.height?i.y-=t.height:i.y<0&&(i.y+=t.height),i.y})})}}});