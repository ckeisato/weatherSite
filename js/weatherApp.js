define(["precipitation","temperature","apiKeys","debounce","testData"],function(e,t,i,n,a){return{openWeatherApiQuery:"http://api.openweathermap.org/data/2.5/weather?",openWeatherApiArgs:"&units=imperial",init:function(){this.weatherBox=d3.select("#weatherBox"),this.temperature=t,this.preciptation=e,this.apiKeys=i,this.getGooglePlacesScript()},getWeatherData:function(e,t){var i="lat="+e+"&lon="+t,n=this.openWeatherApiQuery+i+this.apiKeys.openWeather+this.openWeatherApiArgs,a=new XMLHttpRequest,o=this;a.open("GET",n),a.send(null),a.onreadystatechange=function(){var e=4,t=200;a.readyState===e&&(a.status===t?o.initNewWeather(JSON.parse(a.responseText)):console.log("Error: "+a.status))}},setText:function(e){var t=e.name,i=e.weather[0].description,n=e.main.temp;humidity=e.main.humidity,document.getElementById("location").innerHTML=t,document.getElementById("conditions").innerHTML=i,document.getElementById("humidity").innerHTML="humidity: "+humidity+"%",document.getElementById("temperature").innerHTML=n+"&deg;"},initNewWeather:function(e){document.getElementById("weatherBox").innerHTML="",this.weatherData=e,this.temperature.initTemperature(e.main.temp,this),this.preciptation.initPercipitation(e.weather[0].id,this),this.setText(this.weatherData)},getGooglePlacesScript:function(){var e="https://maps.googleapis.com/maps/api/js?key="+this.apiKeys.googlePlaces+"&libraries=places",t=document.getElementById("google-maps-script"),i=this;t.addEventListener("load",function(e){i.initLocation()}),t.setAttribute("src",e)},initLocation:function(){var e=document.getElementById("input-location"),t=new google.maps.places.Autocomplete(e),i=this;t.addListener("place_changed",function(){var e=t.getPlace();return e.geometry?void i.getWeatherData(e.geometry.location.lat(),e.geometry.location.lng()):void window.alert("Autocomplete's returned place contains no geometry")})}}});